<!-- ONCE its logged it displays this code...
To log out click Inspect/Resources/Cookies/Localhost/Delete:PHPSESSID/ -->
<?php 

if(!isset($_SESSION['logged']))
{
   header('Location: ./.php');
}

?>


<!DOCTYPE html>
<html lang="en">
      <headReplace metal:use-macro="/templating/head.xhtml/meta_head">
      </headReplace>
    
    <navReplace metal:use-macro="./templating/nav.xhtml/nav_bar">
    </navReplace>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

    <body>
        <div id="content">
            
            <span>My Information</span>
            
            <div id="cmenu">
                <ul id="citems" style="padding:0px;">
                     <!--<br><span>Custom Glasses</span></br>-->
                     <a href="./info.php">| My Information</a>
                     <a href="./order.php">| My Orders |</a>
                     <a href="./cart.php">My Cart |</a>
                </ul>
            </div>
            
            <form class="pure-form pure-form-aligned">
                <fieldset>
                    <div class="pure-control-group">
                        <label for="First Name">First Name</label>
                        <input id="fname" type="text" placeholder="First Name" />
                    </div>

                    <div class="pure-control-group">
                        <label for="Last Name">Last Name</label>
                        <input id="lname" type="text" placeholder="Last Name" />
                    </div>

                    <div class="pure-control-group">
                        <label for="email">Email Address</label>
                        <input id="email" type="email" placeholder="Email Address" />
                    </div>

                    <div class="pure-control-group">
                        <label for="address1">Address 1</label>
                        <input id="address1" type="text" placeholder="Address 1" />
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="address2">Address 2</label>
                        <input id="address2" type="text" placeholder="Address 2" />
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="country">Country</label>
                        <select id="country">
                            <option>Canada</option>
                            <option>United States</option>
                        </select>
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="stateProvince">State/Province</label>
                        <select id="stateProvince1">
                            <option>AL</option>
                            <option>CA</option>
                            <option>IL</option>
                            <option>BC</option>
                            <option>ON</option>
                            <option>NB</option>
                        </select>
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="city">City</label>
                        <select id="stateProvince2">
                            <option>Burnaby</option>
                            <option>Delta</option>
                            <option>Surrey</option>
                            <option>Richmond</option>
                            <option>Vancouver</option>
                        </select>
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="phoneNum">Phone Number</label>
                        <input id="phoneNum" type="text" placeholder="Phone Number"/>
                    </div>
                    
                    <div class="pure-control-group">
                        <label for="zpcode">Zip/Postal Code</label>
                        <input id="zpcode" type="text" placeholder="Zip/Postal Code"/>
                    </div>
                    
                    <div class="pure-controls">
                        <!--<label for="cb" class="pure-checkbox">
                            <input id="cb" type="checkbox"></input> I've read the terms and conditions
                        </label>-->

                        <a href=""><button id="sub" type="submit">Confirm Edit</button></a>
                    </div>
                </fieldset>
            </form>
        </div>
        
        <script>
            $(document).ready(function(){
                //connect and insert
                
                
                document.getElementById("sub").onclick = function(e){
    
                    e.preventDefault();
                    $.ajax({
                        //UPDATE THE PERSONAL INFORMATION
                        url:"./mod/controller/user-control.php",
                        type:"post",
                        dataType:"html",
                        data: {
                            
                            method:"update",
                            email: document.getElementById("email").value,
                            address1: document.getElementById("address1").value,
                            address2: document.getElementById("address2").value,
                            country: document.getElementById("country").value,
                            staProv: document.getElementById("stateProvince1").value,
                            city: document.getElementById("stateProvince2").value,
                            zipPo: document.getElementById("zpcode").value,
                            fname: document.getElementById("fname").value,
                            lname: document.getElementById("lname").value,
                            phoneNum: document.getElementById("phoneNum").value,   
                            action: "addUser"
                            
                        },
                        success:function(resp){
                            alert("USER PROFILE UPDATED!");
                            console.log(resp);
                            //user_id = resp[0].id;
                        
                        }
                        
                        /*
                        success:function(resp){
                            alert("User profile updated!");
                        },
                        error: function(jqXHR, textStatus, errorThrown) {
                            console.log(jqXHR.statusText, textStatus);
                            console.log(resp);
                        }
                        */
                    });
                }
            });
                
        </script>
    </body>
    
    <footerReplace metal:use-macro="/templating/footer.xhtml/page_footer">
    </footerReplace>
    
</html>